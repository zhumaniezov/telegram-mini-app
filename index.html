<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Telegram Mini App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--tg-theme-bg-color, #f0f4ff);
      color: var(--tg-theme-text-color, #222);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
    }
    #greeting {
      font-size: 28px;
      margin-bottom: 40px;
      text-align: center;
      user-select: none;
      width: 100%;
      max-width: 400px;
    }
    .buttons, .submenu, .form-container {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 400px;
      width: 100%;
    }
    button {
      flex: 1 1 40%;
      padding: 14px 20px;
      font-size: 18px;
      font-weight: 600;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      box-shadow: 0 6px 15px rgba(118, 75, 162, 0.5);
      transition: background 0.3s ease, transform 0.15s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      user-select: none;
      outline-offset: 2px;
      outline: transparent;
    }
    button:hover {
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
      transform: scale(1.05);
      outline-color: #fff;
    }
    button:active {
      transform: scale(0.95);
    }
    .icon {
      font-size: 22px;
      user-select: none;
      pointer-events: none;
    }
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º */
    label {
      font-weight: 600;
      margin-top: 10px;
      display: block;
      user-select: none;
    }
    input[type="date"], select {
      margin-top: 6px;
      padding: 8px 12px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 100%;
      max-width: 200px;
      box-sizing: border-box;
    }
    .form-container {
      flex-direction: column;
      align-items: flex-start;
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(100, 100, 100, 0.1);
      margin-top: 20px;
    }
    .error {
      color: red;
      font-weight: 600;
      margin-top: 10px;
      user-select: none;
    }
    .hidden {
      display: none;
    }
    .back-btn {
      margin-top: 20px;
      background: #aaa;
      flex: none;
      width: auto;
      border-radius: 10px;
      box-shadow: none;
    }
    .back-btn:hover {
      background: #888;
      transform: none;
      outline-color: transparent;
    }
  </style>
</head>
<body>
  <h1 id="greeting">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>

  <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
  <div id="main-buttons" class="buttons">
    <button id="vacation"><span class="icon">üèñÔ∏è</span> –û—Ç–ø—É—Å–∫</button>
    <button id="lunch"><span class="icon">üçî</span> –û–±–µ–¥</button>
    <button id="salary"><span class="icon">üí∞</span> –ó–∞—Ä–ø–ª–∞—Ç–∞</button>
    <button id="chat"><span class="icon">üí¨</span> –ß–∞—Ç</button>
  </div>

  <!-- –ü–æ–¥–º–µ–Ω—é –¥–ª—è –æ–±–µ–¥–∞ -->
  <div id="lunch-menu" class="submenu hidden">
    <button data-dish="–ú–∞–∫–∞—Ä–æ–Ω—ã"><span class="icon">üçù</span> –ú–∞–∫–∞—Ä–æ–Ω—ã</button>
    <button data-dish="–ü–ª–æ–≤"><span class="icon">üçö</span> –ü–ª–æ–≤</button>
    <button data-dish="–°—É–ø"><span class="icon">ü•£</span> –°—É–ø</button>
    <button data-dish="–ë—É—Ä–≥–µ—Ä"><span class="icon">üçî</span> –ë—É—Ä–≥–µ—Ä</button>
    <button id="lunch-back" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <!-- –§–æ—Ä–º–∞ –¥–ª—è –æ—Ç–ø—É—Å–∫–∞ -->
  <div id="vacation-form" class="form-container hidden">
    <label for="start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ—Ç–ø—É—Å–∫–∞:</label>
    <input type="date" id="start-date" />
    <label for="end-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ—Ç–ø—É—Å–∫–∞:</label>
    <input type="date" id="end-date" />
    <div id="vacation-error" class="error hidden"></div>
    <button id="vacation-submit" style="margin-top: 15px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    <button id="vacation-back" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <!-- –í—ã–±–æ—Ä –≥–æ–¥–∞ –¥–ª—è –∑–∞—Ä–ø–ª–∞—Ç—ã -->
  <div id="salary-year" class="submenu hidden">
    <!-- –ö–Ω–æ–ø–∫–∏ –≥–æ–¥–æ–≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤ JS -->
    <button id="salary-year-back" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <!-- –í—ã–±–æ—Ä –º–µ—Å—è—Ü–∞ –¥–ª—è –∑–∞—Ä–ø–ª–∞—Ç—ã -->
  <div id="salary-month" class="submenu hidden">
    <button data-month="–Ø–Ω–≤–∞—Ä—å">–Ø–Ω–≤–∞—Ä—å</button>
    <button data-month="–§–µ–≤—Ä–∞–ª—å">–§–µ–≤—Ä–∞–ª—å</button>
    <button data-month="–ú–∞—Ä—Ç">–ú–∞—Ä—Ç</button>
    <button data-month="–ê–ø—Ä–µ–ª—å">–ê–ø—Ä–µ–ª—å</button>
    <button data-month="–ú–∞–π">–ú–∞–π</button>
    <button data-month="–ò—é–Ω—å">–ò—é–Ω—å</button>
    <button data-month="–ò—é–ª—å">–ò—é–ª—å</button>
    <button data-month="–ê–≤–≥—É—Å—Ç">–ê–≤–≥—É—Å—Ç</button>
    <button data-month="–°–µ–Ω—Ç—è–±—Ä—å">–°–µ–Ω—Ç—è–±—Ä—å</button>
    <button data-month="–û–∫—Ç—è–±—Ä—å">–û–∫—Ç—è–±—Ä—å</button>
    <button data-month="–ù–æ—è–±—Ä—å">–ù–æ—è–±—Ä—å</button>
    <button data-month="–î–µ–∫–∞–±—Ä—å">–î–µ–∫–∞–±—Ä—å</button>
    <button id="salary-month-back" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    const user = tg.initDataUnsafe.user || { first_name: "–ì–æ—Å—Ç—å" };

    const now = new Date();
    const hour = now.getHours();

    let greetingText = "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä";
    if (hour < 12) greetingText = "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ";
    else if (hour < 18) greetingText = "–î–æ–±—Ä—ã–π –¥–µ–Ω—å";

    document.getElementById("greeting").innerText = `${greetingText}, ${user.first_name}!`;

    // –ì–ª–∞–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ –±–ª–æ–∫–∏
    const mainButtons = document.getElementById("main-buttons");
    const lunchMenu = document.getElementById("lunch-menu");
    const vacationForm = document.getElementById("vacation-form");
    const salaryYear = document.getElementById("salary-year");
    const salaryMonth = document.getElementById("salary-month");

    // === –§—É–Ω–∫—Ü–∏–∏ –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è ===
    function showBlock(block) {
      [mainButtons, lunchMenu, vacationForm, salaryYear, salaryMonth].forEach(el => {
        if (el === block) el.classList.remove("hidden");
        else el.classList.add("hidden");
      });
    }

    // === –û–±–µ–¥ ===
    document.getElementById("lunch").onclick = () => {
      showBlock(lunchMenu);
    };

    document.getElementById("lunch-back").onclick = () => {
      showBlock(mainButtons);
    };

    lunchMenu.querySelectorAll("button[data-dish]").forEach(btn => {
      btn.onclick = () => {
        alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ –±–ª—é–¥–æ: ${btn.dataset.dish}`);
      };
    });

    // === –û—Ç–ø—É—Å–∫ ===
    document.getElementById("vacation").onclick = () => {
      showBlock(vacationForm);
      document.getElementById("vacation-error").classList.add("hidden");
      // –°–±—Ä–æ—Å–∏—Ç—å –¥–∞—Ç—ã
      document.getElementById("start-date").value = "";
      document.getElementById("end-date").value = "";
      // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: —Å–µ–≥–æ–¥–Ω—è –∏ –ø–æ–∑–∂–µ
      const todayStr = new Date().toISOString().slice
(0, 10);
document.getElementById("start-date").setAttribute("min", todayStr);
document.getElementById("end-date").setAttribute("min", todayStr);
};
    document.getElementById("vacation-back").onclick = () => {
  showBlock(mainButtons);
};

document.getElementById("vacation-submit").onclick = () => {
  const start = document.getElementById("start-date").value;
  const end = document.getElementById("end-date").value;
  const error = document.getElementById("vacation-error");

  if (!start || !end) {
    error.innerText = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–µ –¥–∞—Ç—ã.";
    error.classList.remove("hidden");
    return;
  }
  const startDate = new Date(start);
  const endDate = new Date(end);

  if (endDate < startDate) {
    error.innerText = "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞.";
    error.classList.remove("hidden");
    return;
  }

  const diffTime = endDate - startDate;
  const diffDays = diffTime / (1000 * 60 * 60 * 24) + 1;

  if (diffDays > 14) {
    error.innerText = "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ø—É—Å–∫–∞ ‚Äî 14 –¥–Ω–µ–π.";
    error.classList.remove("hidden");
    return;
  }

  error.classList.add("hidden");
  alert(`–û—Ç–ø—É—Å–∫ —Å ${start} –ø–æ ${end} –ø—Ä–∏–Ω—è—Ç.`);
};

// === –ó–∞—Ä–ø–ª–∞—Ç–∞ ===
document.getElementById("salary").onclick = () => {
  showBlock(salaryYear);
  renderYears();
};

document.getElementById("salary-year-back").onclick = () => {
  showBlock(mainButtons);
};

document.getElementById("salary-month-back").onclick = () => {
  showBlock(salaryYear);
};

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –≥–æ–¥–æ–≤ (–æ—Ç 2025 –¥–æ 2015)
function renderYears() {
  // –û—á–∏—â–∞–µ–º –≤—Å–µ, –∫—Ä–æ–º–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥
  const backBtn = document.getElementById("salary-year-back");
  salaryYear.innerHTML = "";
  salaryYear.appendChild(backBtn);

  for (let y = 2025; y >= 2015; y--) {
    const btn = document.createElement("button");
    btn.textContent = y;
    btn.onclick = () => {
      showBlock(salaryMonth);
      salaryMonth.setAttribute("data-year", y);
    };
    salaryYear.insertBefore(btn, backBtn);
  }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –º–µ—Å—è—Ü–∞
salaryMonth.querySelectorAll("button[data-month]").forEach(btn => {
  btn.onclick = () => {
    const year = salaryMonth.getAttribute("data-year");
    const month = btn.dataset.month;
    alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É –∑–∞ ${month} ${year} –≥–æ–¥–∞`);
  };
});

// === –ß–∞—Ç ===
document.getElementById("chat").onclick = () => {
  alert("–§—É–Ω–∫—Ü–∏—è –ß–∞—Ç–∞ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.");
};
    </script> </body> </html> ```
