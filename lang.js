const translations = {
  ru: {
    greeting: "Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ,",
    startBtn: "Ð’Ð¾Ð¹Ñ‚Ð¸ ÐºÐ°Ðº",
    mainTitle: "Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ",
    salaryTitle: "ðŸ’° Ð—Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ð°",
    vacationTitle: "ðŸ–ï¸ ÐžÑ‚Ð¿ÑƒÑÐº",
    lunchTitle: "ðŸ• ÐžÐ±ÐµÐ´",
    chatTitle: "ðŸ’¬ Ð§Ð°Ñ‚",
    lunchPageTitle: "ðŸ½ï¸ ÐžÐ±ÐµÐ´ÐµÐ½Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ",
    confirmLunch: "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð¾Ð±ÐµÐ´",
    yourChoice: "Ð’Ð°Ñˆ Ð²Ñ‹Ð±Ð¾Ñ€:",
    choose: "Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ",
    back: "â† ÐÐ°Ð·Ð°Ð´",
    payslipTitle: "ðŸ’° Ð Ð°ÑÑ‡ÐµÑ‚Ð½Ñ‹Ð¹ Ð»Ð¸ÑÑ‚Ð¾Ðº",
    chooseYear: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð³Ð¾Ð´",
    chooseMonth: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¼ÐµÑÑÑ†",
    showPayslip: "ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ",
    downloadPDF: "Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ PDF",
    sendEmail: "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° email",
    vacationTitlePage: "ðŸ–ï¸ Ð’Ð°Ñˆ Ð¾Ñ‚Ð¿ÑƒÑÐº",
    daysLeft: "ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ð´Ð½ÐµÐ¹ Ð¾Ñ‚Ð¿ÑƒÑÐºÐ°:",
    planVacation: "Ð—Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð¿ÑƒÑÐº",
    submitRequest: "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ",
    upcomingVacation: "Ð‘Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº",
    months: ["Ð¯Ð½Ð²Ð°Ñ€ÑŒ", "Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ", "ÐœÐ°Ñ€Ñ‚", "ÐÐ¿Ñ€ÐµÐ»ÑŒ", "ÐœÐ°Ð¹", "Ð˜ÑŽÐ½ÑŒ", 
             "Ð˜ÑŽÐ»ÑŒ", "ÐÐ²Ð³ÑƒÑÑ‚", "Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ", "ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ", "ÐÐ¾ÑÐ±Ñ€ÑŒ", "Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ"],
    dishes: [
      {
        name: "ÐšÑƒÑ€Ð¸Ð½Ñ‹Ð¹ ÑÑƒÐ¿",
        description: "Ð¡ Ð´Ð¾Ð¼Ð°ÑˆÐ½ÐµÐ¹ Ð»Ð°Ð¿ÑˆÐ¾Ð¹ Ð¸ Ð·ÐµÐ»ÐµÐ½ÑŒÑŽ",
        calories: "250"
      },
      {
        name: "Ð“Ñ€ÐµÑ‡ÐºÐ° Ñ Ð³Ñ€Ð¸Ð±Ð°Ð¼Ð¸",
        description: "Ð¡ Ð»ÑƒÐºÐ¾Ð²Ð¾Ð¹ Ð¿Ð¾Ð´Ð¶Ð°Ñ€ÐºÐ¾Ð¹",
        calories: "320"
      },
      {
        name: "Ð¡Ð°Ð»Ð°Ñ‚ Ð¦ÐµÐ·Ð°Ñ€ÑŒ",
        description: "Ð¡ ÐºÑƒÑ€Ð¸Ñ†ÐµÐ¹ Ð¸ Ð¿Ð°Ñ€Ð¼ÐµÐ·Ð°Ð½Ð¾Ð¼",
        calories: "280"
      },
      {
        name: "Ð¢Ð¸Ñ€Ð°Ð¼Ð¸ÑÑƒ",
        description: "ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¸Ñ‚Ð°Ð»ÑŒÑÐ½ÑÐºÐ¸Ð¹",
        calories: "350"
      }
    ],
    caloriesTemplate: "~{calories} ÐºÐºÐ°Ð»"
  },
  uz: {
    greeting: "Hayrli kun,",
    startBtn: "Kirish",
    mainTitle: "Asosiy menyu",
    salaryTitle: "ðŸ’° Maosh",
    vacationTitle: "ðŸ–ï¸ Ta'til",
    lunchTitle: "ðŸ• Tushlik",
    chatTitle: "ðŸ’¬ Chat",
    lunchPageTitle: "ðŸ½ï¸ Tushlik menyusi",
    confirmLunch: "Tushlikni tasdiqlash",
    yourChoice: "Tanlovingiz:",
    choose: "Tanlash",
    back: "â† Orqaga",
    payslipTitle: "ðŸ’° Hisob varaqasi",
    chooseYear: "Yilni tanlang",
    chooseMonth: "Oyni tanlang",
    showPayslip: "Koâ€˜rsatish",
    downloadPDF: "PDF yuklab olish",
    sendEmail: "Emailga yuborish",
    vacationTitlePage: "ðŸ–ï¸ Ta'tilingiz",
    daysLeft: "Qolgan ta'til kunlari:",
    planVacation: "Ta'tilni rejalashtiring",
    submitRequest: "Soâ€˜rov yuborish",
    upcomingVacation: "Yaqinlashayotgan ta'til",
    months: ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun",
             "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"],
    dishes: [
      {
        name: "Tovuq sho'rva",
        description: "Uy lag'moni va ko'katlar bilan",
        calories: "250"
      },
      {
        name: "Qo'ziqorinli grechka",
        description: "Piyoz qovurilgan",
        calories: "320"
      },
      {
        name: "Sezar salati",
        description: "Tovuq va parmezan bilan",
        calories: "280"
      },
      {
        name: "Tiramisu",
        description: "Klassik italyan deserti",
        calories: "350"
      }
    ],
    caloriesTemplate: "~{calories} kkal"
  }
};

let currentLang = localStorage.getItem("lang") || "ru";

function translatePage() {
  // Ð¡Ñ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.dataset.i18n;
    const translation = translations[currentLang]?.[key];
    if (translation) el.textContent = translation;
  });

  // Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹
  if (typeof updateDishes === 'function') updateDishes();
  if (typeof updateMonths === 'function') updateMonths();
}

function switchLanguage(lang) {
  currentLang = lang;
  localStorage.setItem("lang", lang);
  translatePage();
}

document.addEventListener("DOMContentLoaded", () => {
  const switcher = document.getElementById("language-switcher");
  if (switcher) {
    switcher.value = currentLang;
    switcher.addEventListener("change", () => switchLanguage(switcher.value));
  }
  translatePage();
});

window.translatePage = translatePage;
window.currentLang = currentLang;
window.translations = translations;
