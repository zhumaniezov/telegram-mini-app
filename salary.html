<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ó–∞—Ä–ø–ª–∞—Ç–∞</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="info-screen">
  <div class="container">
    <h1>üí∞ –†–∞—Å—á–µ—Ç–Ω—ã–π –ª–∏—Å—Ç–æ–∫</h1>
    
    <div class="period-selector">
      <select id="year-select" class="period-select">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–¥</option>
      </select>
      
      <select id="month-select" class="period-select" disabled>
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü</option>
      </select>
      
      <button id="show-payslip" class="show-btn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å</button>
    </div>
    
    <div class="payslip" id="payslip" style="display: none;">
      <div class="employee-info">
        <h3 id="employee-name">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á</h3>
        <p id="period">–ò—é–Ω—å 2023</p>
      </div>
      
      <table class="salary-table">
        <tr>
          <td>–û–∫–ª–∞–¥:</td>
          <td id="salary-base">35 000 000 —Å—É–º</td>
        </tr>
        <tr>
          <td>–ù–∞—á–∏—Å–ª–µ–Ω–æ:</td>
          <td id="salary-accrued">42 750 000 —Å—É–º</td>
        </tr>
        <tr>
          <td>–£–¥–µ—Ä–∂–∞–Ω–æ:</td>
          <td id="salary-deductions">2 150 000 —Å—É–º</td>
        </tr>
        <tr class="total">
          <td>–ö –≤—ã–ø–ª–∞—Ç–µ:</td>
          <td id="salary-net">40 600 000 —Å—É–º</td>
        </tr>
      </table>
      
      <button id="download-pdf" class="download-btn">–°–∫–∞—á–∞—Ç—å PDF</button>
    </div>
    
    <button onclick="window.location.href='main.html'" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <script>
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –≥–æ–¥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –ª–µ—Ç)
    const yearSelect = document.getElementById('year-select');
    const currentYear = new Date().getFullYear();
    for (let year = currentYear; year >= currentYear - 5; year--) {
      const option = document.createElement('option');
      option.value = year;
      option.textContent = year;
      yearSelect.appendChild(option);
    }
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–µ—Å—è—Ü—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≥–æ–¥–∞
    yearSelect.addEventListener('change', function() {
      const monthSelect = document.getElementById('month-select');
      monthSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü</option>';
      monthSelect.disabled = false;
      
      const months = [
        '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
        '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
      ];
      
      months.forEach((month, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = month;
        monthSelect.appendChild(option);
      });
    });
    
    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–µ—Å—è—Ü–∞
    document.getElementById('month-select').addEventListener('change', function() {
      document.getElementById('show-payslip').disabled = !this.value;
    });
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ –ª–∏—Å—Ç–∫–∞
    document.getElementById('show-payslip').addEventListener('click', function() {
      const year = document.getElementById('year-select').value;
      const monthIndex = document.getElementById('month-select').value;
      const months = [
        '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
        '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
      ];
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–∏–æ–¥
      document.getElementById('period').textContent = `${months[monthIndex]} ${year}`;
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å—É–º–º—ã (–≤ –º–ª–Ω. —Å—É–º)
      const base = Math.floor(Math.random() * 20 + 30) * 1000000;
      const accrued = Math.floor(base * (1 + Math.random() * 0.2));
      const deductions = Math.floor(accrued * (0.05 + Math.random() * 0.05));
      const net = accrued - deductions;
      
      // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å—É–º–º—ã
      function formatSum(sum) {
        return sum.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ' —Å—É–º';
      }
      
      // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
      document.getElementById('salary-base').textContent = formatSum(base);
      document.getElementById('salary-accrued').textContent = formatSum(accrued);
      document.getElementById('salary-deductions').textContent = formatSum(deductions);
      document.getElementById('salary-net').textContent = formatSum(net);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞—Å—á–µ—Ç–Ω—ã–π –ª–∏—Å—Ç–æ–∫
      document.getElementById('payslip').style.display = 'block';
    });
    
    // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    document.getElementById('download-pdf').addEventListener('click', function() {
      alert('PDF-–¥–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –≤–∞—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö');
    });
    
    // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ Telegram
    if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe && window.Telegram.WebApp.initDataUnsafe.user) {
      const user = window.Telegram.WebApp.initDataUnsafe.user;
      const userName = [user.last_name, user.first_name].filter(Boolean).join(' ') || '–°–æ—Ç—Ä—É–¥–Ω–∏–∫';
      document.getElementById('employee-name').textContent = userName;
    }
  </script>
</body>
</html>
