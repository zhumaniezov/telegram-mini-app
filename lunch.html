<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="lunchPageTitle">üçΩÔ∏è –û–±–µ–¥–µ–Ω–Ω–æ–µ –º–µ–Ω—é</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="info-screen">
  <!-- –§–ª—ç—Ç-–º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Å SVG-–∏–∫–æ–Ω–∫–æ–π, —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É -->
  <div class="toolbar">
    <button class="back-btn" onclick="universalBack()" aria-label="–ù–∞–∑–∞–¥">
      <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="#bfc8e2" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M16 4l-8 8 8 8"/>
      </svg>
    </button>
    <span class="toolbar-title" data-i18n="salaryTitle">üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞</span>
  </div>
  <div class="container">
    <h1 data-i18n="lunchPageTitle">üçΩÔ∏è –û–±–µ–¥–µ–Ω–Ω–æ–µ –º–µ–Ω—é</h1>

    <div class="menu-date">
      <p id="current-date"></p>
    </div>

    <div class="dishes-list" id="dishes-list">
      <!-- –ë–ª—é–¥–∞ –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>

    <div class="selection-summary">
      <p><span data-i18n="yourChoice"></span> <span id="selected-dish-name"></span></p>
      <button id="confirm-btn" class="confirm-btn" data-i18n="confirmLunch"></button>
    </div>
  </div>

  <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" -->
  <div class="fixed-back-btn">
    <button onclick="window.location.href='main.html'" class="back-btn" data-i18n="back"></button>
  </div>

  <script src="lang.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      translatePage();

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
      const container = document.querySelector('.container');
      const backBtn = document.querySelector('.fixed-back-btn');
      let lastScroll = 0;

      if (container && backBtn) {
        container.addEventListener('scroll', () => {
          const currentScroll = container.scrollTop;
          if (currentScroll > lastScroll) {
            backBtn.classList.add('hide-back-btn');
          } else {
            backBtn.classList.remove('hide-back-btn');
          }
          lastScroll = currentScroll;
        });
      }

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('current-date').textContent = new Date().toLocaleDateString(
        currentLang === 'uz' ? 'uz-UZ' : 'ru-RU', options
      );

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –±–ª—é–¥
      function renderDishes() {
        const dishesList = document.getElementById('dishes-list');
        dishesList.innerHTML = '';

        translations[currentLang].dishes.forEach((dish, index) => {
          const dishItem = document.createElement('div');
          dishItem.className = 'dish-item' + (index === 0 ? ' selected' : '');
          dishItem.innerHTML = `
            <div class="dish-content">
              <h3>${dish.name}</h3>
              <p class="dish-description">${dish.description}</p>
              <p class="dish-calories">
                ${translations[currentLang].caloriesTemplate.replace('{calories}', dish.calories)}
              </p>
            </div>
          `;
          
          dishItem.addEventListener('click', function() {
            document.querySelectorAll('.dish-item').forEach(item => {
              item.classList.remove('selected');
            });
            this.classList.add('selected');
            document.getElementById('selected-dish-name').textContent = dish.name;
          });
          
          dishesList.appendChild(dishItem);
        });

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –±–ª—é–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        if (translations[currentLang].dishes.length > 0) {
          document.getElementById('selected-dish-name').textContent = 
            translations[currentLang].dishes[0].name;
        }
      }

      renderDishes();

      // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
      document.getElementById('confirm-btn').addEventListener('click', () => {
        const selectedDish = document.querySelector('.dish-item.selected h3').textContent;
        alert(`${currentLang === 'uz' ? 'Siz tanladingiz:' : '–í—ã –≤—ã–±—Ä–∞–ª–∏:'} ${selectedDish}\n${
          currentLang === 'uz' ? 'Yoqimli ishtaha!' : '–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞!'}`);
      });
    });
  </script>
 <script>
    function universalBack() {
      if (window.history.length > 1) {
        window.history.back();
      } else {
        window.location.href = "main.html";
      }
    }
  </script>
</body>
</html>
