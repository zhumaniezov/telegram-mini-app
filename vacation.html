<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="vacationTitlePage">üèñÔ∏è –í–∞—à –æ—Ç–ø—É—Å–∫</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="info-screen">
  <div class="container">
    <h1 data-i18n="vacationTitlePage">üèñÔ∏è –í–∞—à –æ—Ç–ø—É—Å–∫</h1>

    <div class="info-card">
      <div class="vacation-balance">
        <p><span data-i18n="daysLeft"></span> <strong id="days-left">14</strong></p>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 70%"></div>
        </div>
      </div>

      <div class="date-selection">
        <h3 data-i18n="planVacation"></h3>
        <input type="text" id="dateRange" placeholder="" readonly />
        <button id="submitVacation" class="submit-btn" data-i18n="submitRequest"></button>
      </div>

      <div class="upcoming-vacation">
        <h3 data-i18n="upcomingVacation"></h3>
        <p id="next-vacation">1-15 –∞–≤–≥—É—Å—Ç–∞ (14 –¥–Ω–µ–π)</p>
      </div>
    </div>

    <button onclick="window.location.href='main.html'" class="back-btn" data-i18n="back"></button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/uz.js"></script>
  <script src="lang.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      translatePage();

      flatpickr("#dateRange", {
        mode: "range",
        dateFormat: "d.m.Y",
        locale: currentLang === 'uz' ? 'uz' : 'ru',
        minDate: "today",
        maxDate: new Date().fp_incr(365),
        onChange: function (selectedDates) {
          if (selectedDates.length === 2) {
            const diff = (selectedDates[1] - selectedDates[0]) / (1000 * 60 * 60 * 24) + 1;
            document.getElementById('days-left').textContent = 14 - diff;
          }
        }
      });

      document.getElementById('submitVacation').addEventListener('click', () => {
        const dates = document.getElementById('dateRange').value;
        if (dates) {
          alert(`${currentLang === 'uz' ? 'Ta ºtil so‚Äòrovi yuborildi:' : '–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—É—Å–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω:'} ${dates}`);
          document.getElementById('next-vacation').textContent = `${dates}`;
        } else {
          alert(currentLang === 'uz' ? 'Iltimos, sanalarni tanlang' : '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –æ—Ç–ø—É—Å–∫–∞');
        }
      });
    });
  </script>
</body>
</html>
