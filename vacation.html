<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–û—Ç–ø—É—Å–∫</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body class="info-screen">
  <div class="container">
    <h1>üèñÔ∏è –í–∞—à –æ—Ç–ø—É—Å–∫</h1>
    
    <div class="info-card">
      <div class="vacation-balance">
        <p>–û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π –æ—Ç–ø—É—Å–∫–∞: <strong id="days-left">14</strong></p>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 70%"></div>
        </div>
      </div>
      
      <div class="date-selection">
        <h3>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—É—Å–∫</h3>
        <input type="text" id="dateRange" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã" readonly>
        <button id="submitVacation" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
      </div>
      
      <div class="upcoming-vacation">
        <h3>–ë–ª–∏–∂–∞–π—à–∏–π –æ—Ç–ø—É—Å–∫</h3>
        <p id="next-vacation">1-15 –∞–≤–≥—É—Å—Ç–∞ (14 –¥–Ω–µ–π)</p>
      </div>
    </div>
    
    <button onclick="window.location.href='main.html'" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    flatpickr("#dateRange", {
      mode: "range",
      dateFormat: "d.m.Y",
      locale: "ru",
      minDate: "today",
      maxDate: new Date().fp_incr(365), // +1 –≥–æ–¥
      onChange: function(selectedDates) {
        if(selectedDates.length === 2) {
          const diff = (selectedDates[1] - selectedDates[0]) / (1000 * 60 * 60 * 24) + 1;
          document.getElementById('days-left').textContent = 14 - diff;
        }
      }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
    document.getElementById('submitVacation').addEventListener('click', function() {
      const dates = document.getElementById('dateRange').value;
      if(dates) {
        alert(`–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—É—Å–∫ ${dates} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!`);
        document.getElementById('next-vacation').textContent = 
          dates.replace(' to ', '-') + ` (${calculateDays(dates)} –¥–Ω–µ–π)`;
      } else {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –æ—Ç–ø—É—Å–∫–∞');
      }
    });

    function calculateDays(dateString) {
      const parts = dateString.split(' to ');
      if(parts.length === 2) {
        const start = new Date(parts[0]);
        const end = new Date(parts[1]);
        return (end - start) / (1000 * 60 * 60 * 24) + 1;
      }
      return 0;
    }
  </script>
</body>
</html>
